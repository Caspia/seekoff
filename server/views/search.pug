extends layout

block content
  h1= title

  form(method='GET' action='/search')
    .form-group
      label(for='search_term') Search:
      input#search_term.form-control(type='text', name='search_term', value=query || '')
    button.btn.btn-primary(type='submit') Search
  hr
  if errors
    ul
      for error in errors
        li!= error.msg || error
  p
    strong Total Hits:
    span !{totalHits};
  p
    if previousUrl
      span <a href=!{previousUrl}>Previous </a>  
    span <a href=!{nextUrl}>Next</a>
  if renderResults
    hr
    .container
      .row.text-muted
        .col-md-1
          h3 Votes
        .col-md-11
          h3 Results
    each result in renderResults
      .container
        .row
          .col-md-1
            h3= result.voteCount
          .col-md-11
            if result.title
              <a class='searchlink' href=!{'/question/' + result.questionId}><h3>!{result.title}</h3></a>
              p
                strong
                  <a href=!{'explain?search_term=' + encodeURIComponent(query) + '&id=' + result.questionId}>Score:!{result.score.toFixed(2)}</a>
              .highlight
                p !{result.highlight}
            else
              p= JSON.stringify(result)
  p
    if previousUrl
      span <a href=!{previousUrl}>Previous </a>  
    span <a href=!{nextUrl}>Next</a>
